{% load static %}

<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ÎœÎ±Î¸Î®Î¼Î±Ï„Î± | MyAcademy</title>
  <link rel="stylesheet" href="{% static 'courses_microservice/courses_style.css' %}" />
</head>
<body>
  <header class="top-bar">
    <a class="logo" href="/">www.myacademy.gr</a>
    <nav class="nav-links">
      <a href="/">Î‘ÏÏ‡Î¹ÎºÎ®</a>
      <div class="dropdown">
        <a href="/courses/">ÎœÎ±Î¸Î®Î¼Î±Ï„Î±</a>
        <div class="dropdown-content">
          <a href="#">Design</a>
          <a href="#">Lifestyle</a>
          <a href="#">Marketing</a>
          <a href="#">Î•Ï€Î¹Ï‡ÎµÎ¹ÏÎ®ÏƒÎµÎ¹Ï‚</a>
          <a href="#">Î›Î¿Î³Î¹ÏƒÏ„Î¹ÎºÎ¬ ÎºÎ±Î¹ ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ¬</a>
          <a href="#">Î•ÏÎ³Î±ÏƒÎ¯ÎµÏ‚ Î“ÏÎ±Ï†ÎµÎ¯Î¿Ï…</a>
          <a href="#">ÎœÎ¿Ï…ÏƒÎ¹ÎºÎ®</a>
          <a href="#">Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÎºÎ®</a>
          <a href="#">Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ® Î•Î¾Î­Î»Î¹Î¾Î·</a>
          <a href="#">Î¥Î³ÎµÎ¯Î± ÎºÎ±Î¹ Î†ÏƒÎºÎ·ÏƒÎ·</a>
          <a href="#">Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ÎºÎ±Î¹ Î’Î¯Î½Ï„ÎµÎ¿</a>
        </div>
      </div>
      <a href="/users/register-teacher/">Î•Î³Î³ÏÎ±Ï†Î® ÎµÎºÏ€Î±Î¹Î´ÎµÏ…Ï„ÏÎ½</a>
      <a href="/users/control-panel/">Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î»Î­Î³Ï‡Î¿Ï…</a>
      <a href="/users/login/">Î£ÏÎ½Î´ÎµÏƒÎ·</a>
    </nav>
  </header>

  <main class="courses-page">
    <aside class="filters">
        <!-- Î¦ÏŒÏÎ¼Î± Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ -->
      <form method="GET" action="" class="search-form">
        <input type="text" name="q" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Î±Î¸Î·Î¼Î¬Ï„Ï‰Î½..." value="{{ request.GET.q|default:'' }}">
        <button type="submit">ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      </form>
       <!-- ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ ÎœÎ±Î¸Î·Î¼Î¬Ï„Ï‰Î½ -->
      <h3>ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚</h3>
      <label><input type="checkbox" class="filter-category" value="all"> ÎŒÎ»ÎµÏ‚ Î¿Î¹ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚</label>
      <label><input type="checkbox" class="filter-category" value="3d-animation"> 3D ÎºÎ±Î¹ Animation</label>
      <label><input type="checkbox" class="filter-category" value="Programming"> Programming</label>
      <label><input type="checkbox" class="filter-category" value="Data Science"> Data science</label>
      <label><input type="checkbox" class="filter-category" value="informatics"> Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÎºÎ®</label>

      <h3>Î•Ï€Î¯Ï€ÎµÎ´Î¿</h3>
      <label><input type="checkbox" class="filter-level" value="Beginner"> Î‘ÏÏ‡Î¬ÏÎ¹Î¿Ï‚</label>
      <label><input type="checkbox" class="filter-level" value="Intermediate"> Î•Î½Î´Î¹Î¬Î¼ÎµÏƒÎ¿</label>
      <label><input type="checkbox" class="filter-level" value="Advanced"> Î•Î¹Î´Î¹ÎºÏŒÏ‚</label>

      <h3>ÎšÏŒÏƒÏ„Î¿Ï‚</h3>
      <label><input type="checkbox" class="filter-price" value="free"> Î”Ï‰ÏÎµÎ¬Î½</label>
      <label><input type="checkbox" class="filter-price" value="paid"> Î Î»Î·ÏÏ‰Î¼Î­Î½Î¿</label>

      <button class="clear-btn">âœ• Î•ÎºÎºÎ±Î¸Î¬ÏÎ¹ÏƒÎ· ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Ï†Î¯Î»Ï„ÏÏ‰Î½</button>
    </aside>

    <section class="course-listing">
      <div class="course-cards">
        {% for course in courses %}
        <div class="course-card" 
             data-category="{{ course.category }}" 
             data-level="{{ course.level }}" 
             data-price="{% if course.price == 0 %}free{% else %}paid{% endif %}" 
             data-title="{{ course.title }}">
          <div class="img-placeholder"></div>
          <a href="/courses/{{ course.slug }}">{{ course.title }}</a>
          <p>ğŸ‘¤ {{ course.enrollment_count }}</p>
          <p>Î‘Ï€ÏŒ <strong>{{ course.instructor }}</strong></p>
          <p>Î£Îµ <em>{{ course.category }}</em></p>
          <p>
            {% for i in range_values %}
              {% if i <= course.rating|default:0 %}
                â­
              {% else %}
                â˜†
              {% endif %}
            {% endfor %}
          </p>
          {% if course.price|default:0 != 0 %}
            <p class="price">{{ course.price }} â‚¬</p>
            <button>ğŸ›’ Î‘Î³Î¿ÏÎ¬ ÎœÎ±Î¸Î®Î¼Î±Ï„Î¿Ï‚</button>
          {% else %}
            <button>Î”Ï‰ÏÎµÎ¬Î½ Î•Î³Î³ÏÎ±Ï†Î®</button>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Filter checkboxes
      const categoryFilters = document.querySelectorAll('.filter-category');
      const levelFilters = document.querySelectorAll('.filter-level');
      const priceFilters = document.querySelectorAll('.filter-price');
      const courseCards = document.querySelectorAll('.course-card');
      const clearButton = document.querySelector('.clear-btn');

      // Filter function
      function filterCourses() {
        const selectedCategories = Array.from(categoryFilters).filter(input => input.checked).map(input => input.value);
        const selectedLevels = Array.from(levelFilters).filter(input => input.checked).map(input => input.value);
        const selectedPrices = Array.from(priceFilters).filter(input => input.checked).map(input => input.value);

        // Loop through all course cards
        courseCards.forEach(course => {
          const category = course.getAttribute('data-category');
          const level = course.getAttribute('data-level');
          const price = course.getAttribute('data-price');

          const matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(category);
          const matchesLevel = selectedLevels.length === 0 || selectedLevels.includes(level);
          const matchesPrice = selectedPrices.length === 0 || selectedPrices.includes(price);

          // Show or hide course based on filter matches
          if (matchesCategory && matchesLevel && matchesPrice) {
            course.style.display = 'block';
          } else {
            course.style.display = 'none';
          }
        });
      }

      // Add event listeners to filter checkboxes
      categoryFilters.forEach(filter => filter.addEventListener('change', filterCourses));
      levelFilters.forEach(filter => filter.addEventListener('change', filterCourses));
      priceFilters.forEach(filter => filter.addEventListener('change', filterCourses));

      // Clear all filters
      clearButton.addEventListener('click', () => {
        categoryFilters.forEach(filter => filter.checked = false);
        levelFilters.forEach(filter => filter.checked = false);
        priceFilters.forEach(filter => filter.checked = false);
        filterCourses(); // Reset to show all courses
      });

      // Initial call to filter courses (in case any checkboxes are pre-selected)
      filterCourses();
    });
  </script>
</body>
</html>
